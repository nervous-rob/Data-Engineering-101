# Lesson 2.4: Advanced SQL

## Navigation
- [← Back to Module Overview](../README.md)
- [Previous Lesson ←](./2.3-sql-fundamentals.md)
- [Next Lesson →](./2.5-java-scala-basics.md)

## Overview
This lesson covers advanced SQL concepts and techniques essential for data engineering, focusing on complex queries, optimization, and performance tuning.

## Learning Objectives
- Master advanced SQL concepts
- Learn query optimization techniques
- Understand window functions and CTEs
- Practice complex data manipulation

## Content

### Advanced SQL Concepts

#### Window Functions
- OVER clause
- Partitioning
- Ordering
- Frame specifications
- Aggregate functions

#### Common Table Expressions (CTEs)
- Basic CTEs
- Recursive CTEs
- Multiple CTEs
- CTE optimization
- Use cases

### Advanced Querying

#### Complex Joins
- INNER JOIN
- OUTER JOIN
- CROSS JOIN
- SELF JOIN
- Anti-joins

#### Subqueries
- Correlated subqueries
- Nested subqueries
- EXISTS/NOT EXISTS
- IN/NOT IN
- ANY/ALL

### Performance Tuning

#### Query Optimization
- Execution plans
- Statistics
- Indexes
- Partitioning
- Query rewriting

#### Advanced Features
- Materialized views
- Stored procedures
- User-defined functions
- Triggers
- Dynamic SQL

## Activities

### Activity 1: Advanced Query Writing
Practice writing complex queries:
1. Window functions
2. CTEs
3. Complex joins
4. Subqueries

### Activity 2: Performance Tuning
Optimize complex queries:
1. Analyze execution plans
2. Implement improvements
3. Measure performance
4. Document optimizations

## Best Practices

### Query Development
- Query structure
- Code reusability
- Error handling
- Documentation
- Testing

### Performance
- Index design
- Statistics management
- Resource utilization
- Monitoring
- Maintenance

### Security
- Access control
- Data protection
- Audit logging
- Compliance
- Best practices

## Resources
- "Advanced SQL for Data Engineering" by DataCamp
- "High Performance SQL" by Baron Schwartz
- Database vendor documentation
- Industry case studies

## Assessment
- Complex query exercises
- Performance tuning project
- Query optimization
- Technical presentation 